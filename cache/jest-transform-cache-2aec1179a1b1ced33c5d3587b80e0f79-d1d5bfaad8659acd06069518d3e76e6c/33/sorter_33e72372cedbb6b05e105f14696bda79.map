{"version":3,"sources":["sorter.js"],"names":["addSorting","cols","currentSort","index","desc","getTable","document","querySelector","getTableHeader","getTableBody","getNthColumn","n","querySelectorAll","onFilterInput","searchValue","getElementById","value","rows","getElementsByTagName","children","i","length","row","textContent","toLowerCase","includes","style","display","addSearchBox","template","templateClone","content","cloneNode","oninput","parentElement","appendChild","loadColumns","colNodes","colNode","col","key","getAttribute","sortable","type","push","defaultDescSort","innerHTML","loadRowData","tableRow","tableCols","data","val","Number","loadData","sortByIndex","sorter","a","b","finalSorter","tableBody","rowNodes","removeChild","sort","removeSortIndicators","cls","className","replace","addSortIndicators","enableUI","el","ithSorter","addEventListener","attachEvent","window"],"mappings":"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","sourcesContent":["/* eslint-disable */\nvar addSorting = (function() {\n    'use strict';\n    var cols,\n        currentSort = {\n            index: 0,\n            desc: false\n        };\n\n    // returns the summary table element\n    function getTable() {\n        return document.querySelector('.coverage-summary');\n    }\n    // returns the thead element of the summary table\n    function getTableHeader() {\n        return getTable().querySelector('thead tr');\n    }\n    // returns the tbody element of the summary table\n    function getTableBody() {\n        return getTable().querySelector('tbody');\n    }\n    // returns the th element for nth column\n    function getNthColumn(n) {\n        return getTableHeader().querySelectorAll('th')[n];\n    }\n\n    function onFilterInput() {\n        const searchValue = document.getElementById('fileSearch').value;\n        const rows = document.getElementsByTagName('tbody')[0].children;\n        for (let i = 0; i < rows.length; i++) {\n            const row = rows[i];\n            if (\n                row.textContent\n                    .toLowerCase()\n                    .includes(searchValue.toLowerCase())\n            ) {\n                row.style.display = '';\n            } else {\n                row.style.display = 'none';\n            }\n        }\n    }\n\n    // loads the search box\n    function addSearchBox() {\n        var template = document.getElementById('filterTemplate');\n        var templateClone = template.content.cloneNode(true);\n        templateClone.getElementById('fileSearch').oninput = onFilterInput;\n        template.parentElement.appendChild(templateClone);\n    }\n\n    // loads all columns\n    function loadColumns() {\n        var colNodes = getTableHeader().querySelectorAll('th'),\n            colNode,\n            cols = [],\n            col,\n            i;\n\n        for (i = 0; i < colNodes.length; i += 1) {\n            colNode = colNodes[i];\n            col = {\n                key: colNode.getAttribute('data-col'),\n                sortable: !colNode.getAttribute('data-nosort'),\n                type: colNode.getAttribute('data-type') || 'string'\n            };\n            cols.push(col);\n            if (col.sortable) {\n                col.defaultDescSort = col.type === 'number';\n                colNode.innerHTML =\n                    colNode.innerHTML + '<span class=\"sorter\"></span>';\n            }\n        }\n        return cols;\n    }\n    // attaches a data attribute to every tr element with an object\n    // of data values keyed by column name\n    function loadRowData(tableRow) {\n        var tableCols = tableRow.querySelectorAll('td'),\n            colNode,\n            col,\n            data = {},\n            i,\n            val;\n        for (i = 0; i < tableCols.length; i += 1) {\n            colNode = tableCols[i];\n            col = cols[i];\n            val = colNode.getAttribute('data-value');\n            if (col.type === 'number') {\n                val = Number(val);\n            }\n            data[col.key] = val;\n        }\n        return data;\n    }\n    // loads all row data\n    function loadData() {\n        var rows = getTableBody().querySelectorAll('tr'),\n            i;\n\n        for (i = 0; i < rows.length; i += 1) {\n            rows[i].data = loadRowData(rows[i]);\n        }\n    }\n    // sorts the table using the data for the ith column\n    function sortByIndex(index, desc) {\n        var key = cols[index].key,\n            sorter = function(a, b) {\n                a = a.data[key];\n                b = b.data[key];\n                return a < b ? -1 : a > b ? 1 : 0;\n            },\n            finalSorter = sorter,\n            tableBody = document.querySelector('.coverage-summary tbody'),\n            rowNodes = tableBody.querySelectorAll('tr'),\n            rows = [],\n            i;\n\n        if (desc) {\n            finalSorter = function(a, b) {\n                return -1 * sorter(a, b);\n            };\n        }\n\n        for (i = 0; i < rowNodes.length; i += 1) {\n            rows.push(rowNodes[i]);\n            tableBody.removeChild(rowNodes[i]);\n        }\n\n        rows.sort(finalSorter);\n\n        for (i = 0; i < rows.length; i += 1) {\n            tableBody.appendChild(rows[i]);\n        }\n    }\n    // removes sort indicators for current column being sorted\n    function removeSortIndicators() {\n        var col = getNthColumn(currentSort.index),\n            cls = col.className;\n\n        cls = cls.replace(/ sorted$/, '').replace(/ sorted-desc$/, '');\n        col.className = cls;\n    }\n    // adds sort indicators for current column being sorted\n    function addSortIndicators() {\n        getNthColumn(currentSort.index).className += currentSort.desc\n            ? ' sorted-desc'\n            : ' sorted';\n    }\n    // adds event listeners for all sorter widgets\n    function enableUI() {\n        var i,\n            el,\n            ithSorter = function ithSorter(i) {\n                var col = cols[i];\n\n                return function() {\n                    var desc = col.defaultDescSort;\n\n                    if (currentSort.index === i) {\n                        desc = !currentSort.desc;\n                    }\n                    sortByIndex(i, desc);\n                    removeSortIndicators();\n                    currentSort.index = i;\n                    currentSort.desc = desc;\n                    addSortIndicators();\n                };\n            };\n        for (i = 0; i < cols.length; i += 1) {\n            if (cols[i].sortable) {\n                // add the click event handler on the th so users\n                // dont have to click on those tiny arrows\n                el = getNthColumn(i).querySelector('.sorter').parentElement;\n                if (el.addEventListener) {\n                    el.addEventListener('click', ithSorter(i));\n                } else {\n                    el.attachEvent('onclick', ithSorter(i));\n                }\n            }\n        }\n    }\n    // adds sorting functionality to the UI\n    return function() {\n        if (!getTable()) {\n            return;\n        }\n        cols = loadColumns();\n        loadData();\n        addSearchBox();\n        addSortIndicators();\n        enableUI();\n    };\n})();\n\nwindow.addEventListener('load', addSorting);\n"]}